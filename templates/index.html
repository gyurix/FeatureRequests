{% extends "layout.html" %}
{% macro render_field(form,id,field) %}
    <dt>{{ field.label }}</dt>
    <script>
        model.{{ form }}.{{ id }} = new Entity("{{ form }}", "{{ id }}", "{{ field.data }}");
    </script>
    <div style="display: none" data-bind="visible: {{ form }}.{{ id }}.errorLen" class="alert alert-danger"
         role="alert">
        <div data-bind="foreach: {{ form }}.{{ id }}.error()">
            <li data-bind="text: $data"/>
        </div>
    </div>
    <div style="display: none" data-bind="visible: {{ form }}.{{ id }}.successLen" class="alert alert-success"
         role="alert">
        <li data-bind="text: {{ form }}.{{ id }}.success"/>
    </div>
    <input data-bind="
                css: { fieldCorrect: {{ form }}.{{ id }}.successLen, fieldError: {{ form }}.{{ id }}.errorLen },
                value: {{ form }}.{{ id }}.data"
           class="form-control"
           placeholder="Enter {{ field.label.text }}"
           type="{{ field.widget.input_type }}">
{% endmacro %}
{% block css %}
    <link rel="stylesheet" href="{{ url_for('static',filename='css/main.css') }}">
{% endblock %}
{% block js %}
    <script src="{{ url_for('static',filename='js/index.js') }}"></script>
{% endblock %}
{% block content %}
    <div class="row">
        <div class="col-sm-12 col-md-6">
            <div class="sub_window">
                <h2>Login</h2>
                <form method="post" action="/">
                    {{ login.hidden_tag() }}
                    {{ render_field("login","email",login.email) }}
                    {{ render_field("login","password",login.password) }}
                    <button class="btn-info" type=button onclick="login()">Login</button>
                </form>
            </div>
        </div>
        <div class="col-sm-12 col-md-6">
            <div class="sub_window">
                <h2>Create account</h2>
                <form method="post" action="/">
                    {{ signup.hidden_tag() }}
                    {{ render_field("signup","username",signup.username) }}
                    {{ render_field("signup","email",signup.email) }}
                    {{ render_field("signup","password",signup.password) }}
                    {{ render_field("signup","repeat_password",signup.repeat_password) }}
                    <dt>Verification
                        {{ recaptcha }}
                    </dt>
                    <button class="btn-danger" type=button onclick="signup()">Register</button>
                </form>
            </div>
        </div>
    </div>
{% endblock %}